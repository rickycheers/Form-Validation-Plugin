var FormValidator=function(g){function h(b){var b=d(b),a={},c=b,a={has_rules:!1};if(c.attr("required"))a.required=!0,a.has_rules=!0;if(c.attr("data-rules"))a.data_rules=c.attr("data-rules"),a.has_rules=!0;if(c.attr("min"))a.min=c.attr("min"),a.has_rules=!0;if(c.attr("max"))a.max=c.attr("max"),a.has_rules=!0;if(c.attr("maxlength"))a.maxlength=c.attr("maxlength"),a.has_rules=!0;if("email"===c.attr("type"))a.email=!0,a.has_rules=!0;if(a.has_rules){var c=b.attr("type"),e=a.data_rules;if(e){var e=rules_arr=
e.replace(" ","").split(","),f={},i;for(i in e){var g=e[i].split(":")[0],h=e[i].split(":")[1];f[g]=h}delete a.data_rules;d.extend(a,f)}this.model.push({input_id:"#"+b.attr("id"),type:c,input_el:b[0],rules:a})}else console.warn('Input: "'+d(b).attr("name")+'" has no "data-rules" attribute, so this input won\'t be validated.');return this.model}function j(){for(var b=0,a=0,c=this.form_inputs.length;a<c;a++){var e=this.form_inputs[a],f=k.call(this,e,e.value);0<f.length?(b+=1,d(e).attr("data-value",d(e).val()),
d(e).addClass("error").val(f[0]),d(e).one("click",function(){var a=d(this);a.removeClass("error");0<a.attr("data-value").length?a.val(a.attr("data-value")):a.val("")})):d(e).removeClass("error")}this.isValidForm=0<b?!1:!0;return f}function k(b){var b=l.call(this,b),a,c,e=[];if(b)for(a in b)if("has_rules"!==a.toString()){c="validate"+a.charAt(0).toUpperCase()+a.substr(1)+".call(this, input, value, rules[key])";try{isValid=eval(c)}catch(d){console.warn('Looks like the validation rule: "'+a+'" is not well written.')}isValid||
e.push({required:"Required field",minlength:"The minimum length must be "+b[a],maxlength:"The maximum length  must be "+b[a],min:"The minimum value must be "+b[a],max:"The maximum value must be "+b[a],email:"Please type a valid email"}[a])}return e}function l(b){var a,c=0,e=this.model.length;do{if(this.model[c].input_el===b)a=this.model[c].rules;c+=1}while(c<e);return a}var d=g;return FormValidator=function(b){if(!b||0===b.match("#").length)throw Error('Sorry, I need a valid ID like: "#someId" and you gave me: '+
b);var a=this;this.isValidForm=null;this.model=[];this.form=d(b);this.form.attr("novalidate","");if(0===this.form.length)throw Error("Sorry, I can't find any element with the ID \""+b+'" ');this.form_inputs=this.form.children("input");for(var c=this.form_inputs.length,b=0;b<c;b++)h.call(this,this.form_inputs[b]);this.form.submit(function(b){b.preventDefault();b=d(this);d("input.error").each(function(){d(this).val().match(/Required field|The minimum length must be \d|The maximum length must be \d|The minimum value must be \d|The maximum value must be \d|Please type a valid email/)&&
d(this).val(d(this).attr("data-value"))});j.call(a);if(a.isValidForm){var c={};b.children("input, textarea").each(function(){c[d(this).attr("name")]=d(this).val()});d.ajax({url:b.attr("action"),type:b.attr("method"),data:c,success:function(a){console.log(a)},error:function(a){console.log(a)}})}})}}(jQuery);
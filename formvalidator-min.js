var FormValidator=function(j){function k(a){var d=a=b(a),c={has_rules:!1};d.attr("required")&&(c.required=!0,c.has_rules=!0);d.attr("data-rules")&&(c.data_rules=d.attr("data-rules"),c.has_rules=!0);d.attr("min")&&(c.min=d.attr("min"),c.has_rules=!0);d.attr("max")&&(c.max=d.attr("max"),c.has_rules=!0);d.attr("maxlength")&&(c.maxlength=d.attr("maxlength"),c.has_rules=!0);"email"===d.attr("type")&&(c.email=!0,c.has_rules=!0);if(c.has_rules){var d=a.attr("type"),e=c.data_rules;if(e){var e=rules_arr=e.replace(" ",
"").split(","),f={},g;for(g in e){var l=e[g].split(":")[0],m=e[g].split(":")[1];f[l]=m}delete c.data_rules;b.extend(c,f)}this.model.push({input_id:"#"+a.attr("id"),type:d,input_el:a[0],rules:c})}else console.warn('Input: "'+b(a).attr("name")+'" has no "data-rules" attribute, so this input won\'t be validated.');return this.model}function n(){for(var a=0,d=0,c=this.form_inputs.length;d<c;d++){var e=this.form_inputs[d],f=b.trim(e.value),f=o.call(this,e,f);0<f.length?(a+=1,b(e).attr("data-value",b(e).val()),
b(e).addClass("error").val(f[0]),b(e).one("click",function(){var a=b(this);a.removeClass("error");0<a.attr("data-value").length?a.val(a.attr("data-value")):a.val("")})):b(e).removeClass("error")}this.isValidForm=0<a?!1:!0;return f}function o(a){var a=p.call(this,a),d,c,b=[];if(a)for(d in a)if("has_rules"!==d.toString()){c="validate"+d.charAt(0).toUpperCase()+d.substr(1)+".call(this, input, value, rules[key])";try{isValid=eval(c)}catch(f){console.warn('Looks like the validation rule: "'+d+'" is not well written.')}isValid||
b.push({required:"Required field",minlength:"The minimum length must be "+a[d],maxlength:"The maximum length  must be "+a[d],min:"The minimum value must be "+a[d],max:"The maximum value must be "+a[d],email:"Please type a valid email"}[d])}return b}function p(a){var b,c=0,e=this.model.length;do this.model[c].input_el===a&&(b=this.model[c].rules),c+=1;while(c<e);return b}function h(a,d,c){var e={},d="function"===typeof d?d:function(){console.log("success")},c="function"===typeof c?c:function(){console.log("error")};
a.find("input[type=text], input[type=email], input[type=number], input[type=phone], input[type=hidden], textarea").each(function(){e[b(this).attr("name")]=b(this).val()});a.find("input[type=radio]:checked").each(function(){e[b(this).attr("name")]=b(this).val()});a.find("input[type=checkbox]").each(function(){b(this).is(":checked")?e[b(this).attr("name")]="on":e[b(this).attr("name")]=""});b.ajax({url:a.attr("action"),type:a.attr("method"),data:e,success:d,error:c})}function q(){b("#captcha").remove();
b("body").append('<div id="captcha"><span id="captcha_value"></span><input id="cvh" type="hidden" name="cvh" /><input id="captcha_value_value" type="text" name="captcha_value_value" /></div>');b("#captcha").dialog({autoOpen:!1,title:"Just to verify you are human.",closeText:"x",width:"360px",height:"250px",buttons:{Ok:function(){b("#cvh").val()===b("#captcha_value_value").val()?(b("#captcha").dialog("close"),b(document).trigger("validcaptcha")):(alert("The validation code does not match.\n Please try again."),
i())}}});i();b("#captcha").dialog("open")}function i(){var a=Math.floor(1E4*Math.random());b("#cvh").val(a);b("#captcha_value").html(a)}var b=j;console=console||{};console.log=console.log||function(){};console.info=console.info||function(){};console.warn=console.warn||function(){};return FormValidator=function(a,d,c,e){if(!a||0===a.match("#").length)throw Error('Sorry, I need a valid ID like: "#someId" and you gave me: '+a);var f=this;this.isValidForm=null;this.model=[];this.form=b(a);this.form.attr("novalidate",
"");if(0===this.form.length)throw Error("Sorry, I can't find any element with the ID \""+a+'" ');this.form_inputs=this.form.find("input, textarea");for(var g=this.form_inputs.length,a=0;a<g;a++)k.call(this,this.form_inputs[a]);this.form.submit(function(a){a.preventDefault();var g=b(this);b("input.error").each(function(){b(this).val().match(/Required field|The minimum length must be \d|The maximum length must be \d|The minimum value must be \d|The maximum value must be \d|Please type a valid email/)&&
b(this).val(b(this).attr("data-value"))});n.call(f);f.isValidForm&&(e?(q(),b(document).bind("validcaptcha",function(){h.call(this,g,d,c)})):h.call(this,g,d,c))})}}(jQuery);
var FormValidator=function(g){function j(b){var b=e(b),a={},c=b,a={has_rules:!1};if(c.attr("required"))a.required=!0,a.has_rules=!0;if(c.attr("data-rules"))a.data_rules=c.attr("data-rules"),a.has_rules=!0;if(c.attr("min"))a.min=c.attr("min"),a.has_rules=!0;if(c.attr("max"))a.max=c.attr("max"),a.has_rules=!0;if(c.attr("maxlength"))a.maxlength=c.attr("maxlength"),a.has_rules=!0;if("email"===c.attr("type"))a.email=!0,a.has_rules=!0;if(a.has_rules){var c=b.attr("type"),d=a.data_rules;if(d){var d=rules_arr=
d.replace(" ","").split(","),f={},h;for(h in d){var k=d[h].split(":")[0],i=d[h].split(":")[1];f[k]=i}delete a.data_rules;e.extend(a,f)}this.model.push({input_id:"#"+b.attr("id"),type:c,input_el:b[0],rules:a})}else console.warn('Input: "'+e(b).attr("name")+'" has no "data-rules" attribute, so this input won\'t be validated.');return this.model}function l(){for(var b=0,a=0,c=this.form_inputs.length;a<c;a++){var d=this.form_inputs[a],f=m.call(this,d,d.value);0<f.length?(b+=1,e(d).attr("data-value",e(d).val()),
e(d).addClass("error").val(f[0]),e(d).one("click",function(){var a=e(this);a.removeClass("error");0<a.attr("data-value").length?a.val(a.attr("data-value")):a.val("")})):e(d).removeClass("error")}this.isValidForm=0<b?!1:!0;return f}function m(b){var b=n.call(this,b),a,c,d=[];if(b)for(a in b)if("has_rules"!==a.toString()){c="validate"+a.charAt(0).toUpperCase()+a.substr(1)+".call(this, input, value, rules[key])";try{isValid=eval(c)}catch(e){console.warn('Looks like the validation rule: "'+a+'" is not well written.')}isValid||
d.push({required:"Required field",minlength:"The minimum length must be "+b[a],maxlength:"The maximum length  must be "+b[a],min:"The minimum value must be "+b[a],max:"The maximum value must be "+b[a],email:"Please type a valid email"}[a])}return d}function n(b){var a,c=0,d=this.model.length;do{if(this.model[c].input_el===b)a=this.model[c].rules;c+=1}while(c<d);return a}var e=g;return FormValidator=function(b,a,c){if(!b||0===b.match("#").length)throw Error('Sorry, I need a valid ID like: "#someId" and you gave me: '+
b);var d=this;this.isValidForm=null;this.model=[];this.form=e(b);this.form.attr("novalidate","");if(0===this.form.length)throw Error("Sorry, I can't find any element with the ID \""+b+'" ');this.form_inputs=this.form.find("input, textarea");for(var f=this.form_inputs.length,b=0;b<f;b++)j.call(this,this.form_inputs[b]);this.form.submit(function(b){b.preventDefault();b=e(this);e("input.error").each(function(){e(this).val().match(/Required field|The minimum length must be \d|The maximum length must be \d|The minimum value must be \d|The maximum value must be \d|Please type a valid email/)&&
e(this).val(e(this).attr("data-value"))});l.call(d);if(d.isValidForm){var f={},i="function"===typeof a?a:function(a){console.log(a)},g="function"===typeof c?c:function(a){console.log(a)};b.find("input, textarea").each(function(){f[e(this).attr("name")]=e(this).val()});e.ajax({url:b.attr("action"),type:b.attr("method"),data:f,success:i,error:g})}})}}(jQuery);
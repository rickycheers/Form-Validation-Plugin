var FormValidator=function(g){function j(a){var b=a=d(a),c={has_rules:!1};b.attr("required")&&(c.required=!0,c.has_rules=!0);b.attr("data-rules")&&(c.data_rules=b.attr("data-rules"),c.has_rules=!0);b.attr("min")&&(c.min=b.attr("min"),c.has_rules=!0);b.attr("max")&&(c.max=b.attr("max"),c.has_rules=!0);b.attr("maxlength")&&(c.maxlength=b.attr("maxlength"),c.has_rules=!0);"email"===b.attr("type")&&(c.email=!0,c.has_rules=!0);if(c.has_rules){var b=a.attr("type"),e=c.data_rules;if(e){var e=rules_arr=e.replace(" ",
"").split(","),f={},h;for(h in e){var k=e[h].split(":")[0],i=e[h].split(":")[1];f[k]=i}delete c.data_rules;d.extend(c,f)}this.model.push({input_id:"#"+a.attr("id"),type:b,input_el:a[0],rules:c})}else console.warn('Input: "'+d(a).attr("name")+'" has no "data-rules" attribute, so this input won\'t be validated.');return this.model}function l(){for(var a=0,b=0,c=this.form_inputs.length;b<c;b++){var e=this.form_inputs[b],f=m.call(this,e,e.value);0<f.length?(a+=1,d(e).attr("data-value",d(e).val()),d(e).addClass("error").val(f[0]),
d(e).one("click",function(){var b=d(this);b.removeClass("error");0<b.attr("data-value").length?b.val(b.attr("data-value")):b.val("")})):d(e).removeClass("error")}this.isValidForm=0<a?!1:!0;return f}function m(a){var a=n.call(this,a),b,c,d=[];if(a)for(b in a)if("has_rules"!==b.toString()){c="validate"+b.charAt(0).toUpperCase()+b.substr(1)+".call(this, input, value, rules[key])";try{isValid=eval(c)}catch(f){console.warn('Looks like the validation rule: "'+b+'" is not well written.')}isValid||d.push({required:"Required field",
minlength:"The minimum length must be "+a[b],maxlength:"The maximum length  must be "+a[b],min:"The minimum value must be "+a[b],max:"The maximum value must be "+a[b],email:"Please type a valid email"}[b])}return d}function n(a){var b,c=0,d=this.model.length;do this.model[c].input_el===a&&(b=this.model[c].rules),c+=1;while(c<d);return b}var d=g;return FormValidator=function(a,b,c){if(!a||0===a.match("#").length)throw Error('Sorry, I need a valid ID like: "#someId" and you gave me: '+a);var e=this;
this.isValidForm=null;this.model=[];this.form=d(a);this.form.attr("novalidate","");if(0===this.form.length)throw Error("Sorry, I can't find any element with the ID \""+a+'" ');this.form_inputs=this.form.find("input, textarea");for(var f=this.form_inputs.length,a=0;a<f;a++)j.call(this,this.form_inputs[a]);this.form.submit(function(a){a.preventDefault();a=d(this);d("input.error").each(function(){d(this).val().match(/Required field|The minimum length must be \d|The maximum length must be \d|The minimum value must be \d|The maximum value must be \d|Please type a valid email/)&&
d(this).val(d(this).attr("data-value"))});l.call(e);if(e.isValidForm){var f={},i="function"===typeof b?b:function(a){console.log(a)},g="function"===typeof c?c:function(a){console.log(a)};a.find("input[type=text], input[type=email], input[type=number], input[type=phone], input[type=hidden], textarea").each(function(){f[d(this).attr("name")]=d(this).val()});a.find("input[type=radio]:checked").each(function(){f[d(this).attr("name")]=d(this).val()});a.find("input[type=checkbox]").each(function(){d(this).is(":checked")?
f[d(this).attr("name")]="on":f[d(this).attr("name")]=""});d.ajax({url:a.attr("action"),type:a.attr("method"),data:f,success:i,error:g})}})}}(jQuery);